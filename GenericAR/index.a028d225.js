var t;function e(t){return t.split(".").pop()}function n(t){return o=t.modelName,["glb","gltf"].includes(e(o))&&(!(s=t.environment)||"neutral"==s||["hdr"].includes(e(s)))&&(!(n=t.posters)||["webp","png","jpg","jpeg"].includes(e(n)));var n,s,o}t=JSON.parse('{"modelName":"cargo/ressources/cargo ship.glb","environment":"cargo/ressources/aircraft_workshop_01_1k.hdr","skybox":"true","poster":"cargo/ressources/poster.webp","targets":[{"label":"Hélice","type":"content","position":{"x":-0.42,"y":-0.1,"z":0.46},"normal":{"x":0,"y":0,"z":1},"content":"Avec cette hélice, le bateau peut avancer."},{"label":"Conteneurs","type":"content","position":{"x":0,"y":0.11,"z":0.45},"content":"Les conteneurs permettent de transporter de la marchandise. \\n Ils peuvent contenir plusieurs tonnes de marchandise. \\n C\'est le moyen le plus répandu pour transporter de grosses quantités sur de longues distances."},{"type":"content","position":{"x":0.1,"y":-0.07,"z":0.48},"normal":{"x":0,"y":0,"z":1},"content":"<div>La coque permet au bateau de ne pas couler</div>"}]}');class s{constructor(t,e){this.content=t,this.slot=e,this.addContentAsSidepanel()}addContentAsSidepanel(){const t=document.createElement("div");t.classList.add("sidepanel"),t.id=`content-hotspot-${this.slot}`,t.addEventListener("click",(t=>s.hideAllSidepanels()));const e=document.createElement("a");e.classList.add("closebtn"),e.addEventListener("click",(t=>s.hideAllSidepanels())),e.href="javascript: void(0)",e.innerText="×",t?.appendChild(e);const n=document.createElement("p");n.innerText=this.content,t?.appendChild(n),document.body.children[0]?.before(t)}static hideAllSidepanels(){const t=document.querySelectorAll(".show");Array.from(t).forEach((t=>{t&&t.classList.remove("show")}))}static showSidepanel(t){s.hideAllSidepanels();const e=document.getElementById(`content-${t}`);e&&e.classList.add("show")}}class o{static counter=0;constructor(t,e,n,r,i){this.position=t,this.normal=e,this.label=n,this.type=r,this.slot=o.counter++,this.content=new s(i,this.slot)}toHTML(){let t=`<button class="Hotspot"\n        slot="hotspot-${this.slot}"\n        data-position="${this.position.toHTML()}" `;return this.normal&&(t+=`data-normal="${this.normal.toHTML()}"`),t+='data-visibility-attribute="visible">\n',this.label&&(t+=`<div class="HotspotAnnotation">${this.label}</div>\n`),t+="</button>",t}static addHotspotsEvents(){Array.from(document.getElementsByClassName("Hotspot")).forEach((t=>{t.addEventListener("click",(function(t){const e=t.target.slot;s.showSidepanel(e)}))}))}}class r{constructor(t,e,n){this.x=t,this.y=e,this.z=n}static fromJSON({x:t,y:e,z:n}){return new r(t,e,n)}getX(){return this.x}getY(){return this.y}getZ(){return this.z}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}toHTML(){return`${this.x}m ${this.y}m ${this.z}m`}}class i{constructor(t){this.modelName=t.modelName,this.annotations=[],t.targets.forEach((t=>{this.annotations.push(new o(r.fromJSON(t.position),t.normal?r.fromJSON(t.normal):null,t.label,t.type,t.content))})),this.poster=t.poster,this.arIcon=t.arIcon,this.arPrompt=t.arPrompt,this.environment=t.environment,this.skybox="true"==t.skybox,this.animation=t.animation}toHTML(){return`<model-viewer \n            bounds="tight" enable-pan shadow-intensity="1"\n            ${this.addModel()}\n            ${this.addAR()}\n            ${this.addCameraControls()}\n            ${this.addPoster()}\n            ${this.addEnvironment()}\n            skybox-image="cargo/ressources/aircraft_workshop_01_1k.hdr"\n        >\n        ${this.addAnnotations()}\n        ${this.addProgressBar()}\n        ${this.addARButton("View in your space")}\n        ${this.addARPrompt()}\n        </model-viewer>`}addModel(){return`src="${this.modelName}"`}addEnvironment(){let t="";return this.environment&&(t+=` environment-image="${this.environment}";`),"neutral"!=this.environment&&this.skybox&&(t+=`skybox-image="${this.environment}"`),t}addAR(){return'ar ar-modes="scene-viewer webxr quick-look"'}addCameraControls(){return"camera-controls"}addPoster(){return this.poster&&this.poster.length>0?`poster="${this.poster}"`:""}addARButton(t){return`<button slot="ar-button" id="ar-button" style="background-image: url(${this.arIcon?this.arIcon:`${globalThis.defaultRessourcesPath}/ar_icon.png`});">\n        ${t}\n        </button>`}addAnnotations(){let t="";return this.annotations.forEach((e=>{t+=e.toHTML()})),t}addARPrompt(){return`<div id="ar-prompt"><img src="${this.arPrompt?this.arPrompt:`${globalThis.defaultRessourcesPath}/ar_hand_prompt.png"`}"></div>`}addProgressBar(){return'<div class="progress-bar hide" slot="progress-bar"><div class="update-bar"></div></div>'}}function a(){const e=function(t){let e="modelName"in t;if(e&&"targets"in t){let n=0;for(;e&&n<t.targets.length;)e=e&&"position"in t.targets[n]&&"x"in t.targets[n].position&&"y"in t.targets[n].position&&"z"in t.targets[n].position,n++}return e}(t)&&n(t)?t:null,s=new i(e);document.getElementById("app").innerHTML=s.toHTML(),o.addHotspotsEvents()}globalThis.defaultRessourcesPath="default/ressources/",new URLSearchParams(window.location.search).has("id")?console.log(function(){const t=window.location.search;return new URLSearchParams(t).get("id")}()):a();
//# sourceMappingURL=index.a028d225.js.map
